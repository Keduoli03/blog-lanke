---
import { getColumnsFromFolder } from '@/utils/content'
const columns = await getColumnsFromFolder()
---

{
  columns.length > 0 && (
    <div class="relative group inline-block" data-pagefind-ignore>
      <a
        class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-secondary text-sm hover:text-accent"
        href="/columns"
      >
        专栏
        <svg width="12" height="12" viewBox="0 0 24 24" class="opacity-60">
          <path fill="currentColor" d="M7 10l5 5 5-5z" />
        </svg>
      </a>
      <div class="absolute left-0 mt-2 w-44 rounded-lg border border-primary bg-primary shadow-lg opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto transition">
        <ul class="py-1">
          {columns.map((c) => (
            <li>
              <a
                class="block px-3 py-2 hover:text-accent hover:bg-secondary/60 rounded"
                href={`/columns/${c.slug}/${c.items[0]?.slug.split('/').pop()}`}
              >
                {c.title}
              </a>
            </li>
          ))}
        </ul>
      </div>
    </div>
  )
}
